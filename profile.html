<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>AniGameList - Profile (Super Responsive)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    :root { 
      --nav-h: 70px;
      --primary-color: #b57cff;
      --primary-hover: #a366ff;
      --primary-soft: rgba(181, 124, 255, 0.15);
      --dark-bg: #0a0a0c;
      --card-bg: #141418;
      --border-color: #2c2c34;
      --text-light: #fff;
      --text-dim: #b0b0b8;
      --input-bg: #1e1e24;
      
      /* Responsive font variables */
      --fs-xs: clamp(0.7rem, 2vw, 0.8rem);
      --fs-sm: clamp(0.8rem, 2.2vw, 0.9rem);
      --fs-md: clamp(0.9rem, 2.5vw, 1rem);
      --fs-lg: clamp(1.1rem, 3vw, 1.3rem);
      --fs-xl: clamp(1.3rem, 4vw, 1.8rem);
      --fs-xxl: clamp(1.5rem, 5vw, 2.2rem);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background: var(--dark-bg);
      color: var(--text-light);
      padding-top: var(--nav-h);
      overflow-x: hidden;
      width: 100%;
      position: relative;
    }

    /* ===== NAVBAR ===== */
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 0 5%;
      background: #0c0c10;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      height: var(--nav-h);
    }

    nav h2 {
      font-weight: 700;
      font-size: var(--fs-lg);
      color: white;
      white-space: nowrap;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: clamp(20px, 4vw, 40px);
      margin: 0;
      padding: 0;
    }

    nav ul li {
      cursor: pointer;
      font-weight: 500;
      color: var(--text-dim);
      transition: all 0.3s ease;
      font-size: var(--fs-sm);
      padding: 6px 0;
      position: relative;
      white-space: nowrap;
    }

    nav ul li a {
      color: inherit;
      text-decoration: none;
    }

    nav ul li.active {
      color: var(--primary-color);
    }

    nav ul li.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--primary-color);
      border-radius: 3px;
    }

    nav ul li:hover {
      color: var(--primary-color);
    }

    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background: white;
      border-radius: 3px;
      transition: 0.3s;
    }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }

    /* ===== PROFILE CONTENT ===== */
    .container {
      max-width: 100%;
      width: 95%;
      margin: 0 auto;
      padding: clamp(15px, 3vw, 30px) clamp(15px, 4vw, 30px);
    }

    /* Desktop besar */
    @media (min-width: 1400px) {
      .container { max-width: 1600px; width: 92%; }
    }
    @media (min-width: 1200px) and (max-width: 1399px) {
      .container { max-width: 1400px; width: 92%; }
    }
    @media (min-width: 992px) and (max-width: 1199px) {
      .container { max-width: 1200px; width: 94%; }
    }

    /* Profile Header */
    .profile-header {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: clamp(20px, 4vw, 30px) clamp(25px, 5vw, 40px);
      margin-bottom: clamp(20px, 3vw, 30px);
      display: flex;
      align-items: center;
      gap: clamp(15px, 4vw, 30px);
      flex-wrap: wrap;
    }

    .avatar {
      width: clamp(70px, 12vw, 100px);
      height: clamp(70px, 12vw, 100px);
      background: var(--primary-soft);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid var(--primary-color);
      flex-shrink: 0;
    }

    .avatar i {
      font-size: clamp(32px, 6vw, 48px);
      color: var(--primary-color);
    }

    .profile-info {
      flex: 1;
      min-width: 200px;
    }

    .profile-info h1 {
      font-size: var(--fs-xxl);
      font-weight: 700;
      margin-bottom: 5px;
      color: white;
      word-break: break-word;
    }

    .profile-info .username {
      color: var(--primary-color);
      font-size: var(--fs-md);
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    /* ===== BADGE - FIX OVERFLOW ===== */
    .profile-badges {
      display: flex;
      gap: clamp(10px, 2vw, 20px);
      flex-wrap: wrap;
      width: 100%;
    }

    .badge-item {
      background: var(--input-bg);
      padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2vw, 24px);
      border-radius: 24px;
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: clamp(6px, 1.2vw, 12px);
      flex: 0 1 auto;
      transition: all 0.3s ease;
      cursor: pointer;
      min-width: 0; /* Penting! Untuk flex overflow */
    }

    .badge-item:hover {
      background: var(--primary-color);
      border-color: var(--primary-color);
    }

    .badge-item:hover i,
    .badge-item:hover .badge-info h4,
    .badge-item:hover .badge-info span {
      color: white;
    }

    .badge-item i {
      color: var(--primary-color);
      font-size: clamp(18px, 3.5vw, 24px);
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .badge-info {
      min-width: 0; /* Penting! Untuk text overflow */
      flex: 1;
    }

    .badge-info h4 {
      font-size: var(--fs-xs);
      color: var(--text-dim);
      margin-bottom: 2px;
      white-space: nowrap;
      transition: all 0.3s ease;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .badge-info span {
      font-size: clamp(18px, 3.5vw, 24px);
      font-weight: 700;
      color: white;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    /* ===== STATS CONTROL - DEFAULT 3 KOLOM ===== */
    .stats-controls {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: clamp(20px, 3vw, 25px) clamp(20px, 4vw, 30px);
      margin-bottom: clamp(20px, 3vw, 30px);
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 kolom sejajar */
      gap: clamp(16px, 3vw, 24px);
      align-items: end;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .control-group label {
      display: block;
      color: var(--text-dim);
      font-size: var(--fs-xs);
      font-weight: 600;
      margin-bottom: 8px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .control-group label i {
      color: var(--primary-color);
      margin-right: 6px;
      font-size: var(--fs-sm);
    }

    /* ===== BUTTON TYPE ===== */
    .category-buttons {
      display: flex;
      gap: 10px;
      width: 100%;
    }

    .category-btn {
      border: 1px solid white;
      background: #0a0a0c;
      color: white;
      font-weight: 600;
      padding: clamp(8px, 1.5vw, 12px) clamp(8px, 2vw, 20px);
      border-radius: 12px;
      font-size: var(--fs-sm);
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
      flex: 1 1 0;
      justify-content: center;
      white-space: nowrap;
    }

    .category-btn i {
      font-size: var(--fs-md);
    }

    .category-btn.active {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }

    .category-btn:hover {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }

    /* ===== DROPDOWN CUSTOM ===== */
    .custom-dropdown {
      width: 100%;
    }

    .custom-dropdown .btn {
      width: 100%;
      background: #0a0a0c;
      border: 1px solid #3a3a44;
      border-radius: 12px;
      padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2vw, 20px);
      color: white;
      font-size: var(--fs-sm);
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.2s ease;
      text-align: left;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .custom-dropdown .btn span {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .custom-dropdown .btn:hover,
    .custom-dropdown .btn:focus {
      background: #15151c;
      border-color: var(--primary-color);
      box-shadow: none;
    }

    .custom-dropdown .btn::after {
      content: "\f078";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      border: none;
      vertical-align: middle;
      margin-left: 8px;
      color: var(--primary-color);
      font-size: var(--fs-xs);
      flex-shrink: 0;
    }

    .custom-dropdown .dropdown-menu {
      width: 100%;
      min-width: 100%;
      background: #0c0c14;
      border: 1px solid #3a3a44;
      border-radius: 16px;
      padding: 8px;
      margin-top: 6px;
      box-shadow: 0 20px 30px rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      max-height: 300px;
      overflow-y: auto;
    }

    .custom-dropdown .dropdown-item {
      color: white;
      border-radius: 10px;
      padding: clamp(8px, 2vw, 10px) clamp(12px, 3vw, 18px);
      font-size: var(--fs-sm);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.15s;
      white-space: normal;
      word-break: break-word;
    }

    .custom-dropdown .dropdown-item i {
      width: 20px;
      color: var(--primary-color);
      flex-shrink: 0;
    }

    .custom-dropdown .dropdown-item:hover {
      background: var(--primary-color);
      color: white;
    }

    .custom-dropdown .dropdown-item:hover i {
      color: white;
    }

    .custom-dropdown .dropdown-item.active {
      background: rgba(181,124,255,0.2);
      color: var(--primary-color);
      font-weight: 600;
    }

    /* ===== CHART ===== */
    .chart-container {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: clamp(16px, 3vw, 25px);
      margin-bottom: clamp(20px, 3vw, 30px);
      box-shadow: 0 16px 32px rgba(0,0,0,0.4);
    }

    .chart-wrapper {
      position: relative;
      height: clamp(250px, 50vw, 350px);
      width: 100%;
    }

    canvas {
      max-width: 100%;
      height: auto !important;
    }

    /* ===== CONCLUSION ===== */
    .conclusion-card {
      background: linear-gradient(145deg, rgba(181,124,255,0.08), rgba(20,20,28,0.9));
      border: 1px solid rgba(181,124,255,0.5);
      border-radius: 14px;
      padding: clamp(18px, 3vw, 25px) clamp(20px, 4vw, 35px);
      margin-top: 20px;
      backdrop-filter: blur(8px);
    }

    .conclusion-card i {
      color: var(--primary-color);
      font-size: clamp(24px, 5vw, 28px);
      margin-right: 15px;
      flex-shrink: 0;
    }

    .conclusion-text {
      font-size: var(--fs-md);
      line-height: 1.6;
      color: white;
      font-weight: 500;
      word-break: break-word;
    }

    .conclusion-text span {
      color: var(--primary-color);
      font-weight: 700;
    }

    /* ===== TABLET MODE (768px - 991px) - 1 BARIS SEJAJAR ===== */
    @media (min-width: 768px) and (max-width: 991px) {
      .container { 
        max-width: 100%; 
        padding: 20px; 
        width: 100%;
      }
      
      nav { padding: 0 4%; }
      nav ul { gap: 20px; }
      
      .profile-header { 
        flex-direction: column; 
        text-align: center; 
        padding: 25px;
      }
      
      .profile-badges { 
        justify-content: center; 
        width: 100%;
      }
      
      .badge-item { 
        flex: 0 1 auto;
      }
      
      /* TABLET: 3 KOLOM SEJAJAR DALAM 1 BARIS */
      .stats-controls {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 kolom sejajar */
        gap: 16px;
        align-items: end;
      }
      
      .category-buttons {
        flex-direction: row; /* SEBARIS, BUKAN ATAS BAWAH */
        gap: 8px;
      }
      
      .category-btn {
        padding: 10px 8px;
        font-size: 13px;
        white-space: nowrap;
      }
      
      .custom-dropdown .btn {
        padding: 10px 12px;
        font-size: 13px;
      }
    }

    /* ===== MOBILE (576px - 767px) - FIX OVERFLOW BADGE ===== */
    @media (min-width: 576px) and (max-width: 767px) {
      .container { 
        max-width: 100%; 
        padding: 15px; 
        width: 100%;
      }
      
      nav { padding: 0 5%; }
      
      .hamburger { display: flex; }
      
      nav ul {
        position: fixed;
        top: var(--nav-h);
        left: 0;
        width: 100%;
        background: #0c0c10;
        flex-direction: column;
        align-items: center;
        padding: 30px 0;
        gap: 25px;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: 0.4s;
        border-top: 1px solid rgba(255,255,255,0.1);
      }
      
      nav ul.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      nav ul li { 
        width: 100%;
        text-align: center;
        white-space: normal;
      }
      
      .profile-header { 
        flex-direction: column; 
        text-align: center; 
        padding: 20px;
      }
      
      /* ===== MOBILE: BADGE SEBARIS TIDAK KELUAR BATAS ===== */
      .profile-badges {
        display: grid;
        grid-template-columns: 1fr 1fr; /* 2 kolom sebaris */
        gap: 12px;
        width: 100%;
      }
      
      /* Games Played dan Anime Watched sebaris */
      .badge-item:nth-child(1),
      .badge-item:nth-child(2) {
        grid-column: span 1;
        width: 100%;
        min-width: 0; /* Mencegah overflow */
        padding: 10px 8px;
      }
      
      /* Total Reviews full width di bawah */
      .badge-item:nth-child(3) {
        grid-column: span 2;
        width: 100%;
        justify-content: center;
        padding: 10px 12px;
      }
      
      /* Memperkecil ukuran font dan icon di mobile */
      .badge-item i {
        font-size: 20px;
      }
      
      .badge-info h4 {
        font-size: 11px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      .badge-info span {
        font-size: 18px;
      }
      
      /* Stats controls 1 kolom di mobile */
      .stats-controls {
        grid-template-columns: 1fr;
        gap: 16px;
        padding: 20px;
      }
      
      .category-buttons {
        flex-direction: row;
        width: 100%;
      }
      
      .category-btn {
        padding: 10px 8px;
        font-size: 14px;
      }
      
      .chart-wrapper {
        height: 250px;
      }
    }

    /* ===== MOBILE KECIL (375px - 575px) ===== */
    @media (min-width: 375px) and (max-width: 575px) {
      .container { 
        padding: 12px; 
        width: 100%;
      }
      
      nav { padding: 0 4%; }
      nav h2 { font-size: 20px; }
      .hamburger { display: flex; }
      
      nav ul {
        position: fixed;
        top: var(--nav-h);
        left: 0;
        width: 100%;
        background: #0c0c10;
        flex-direction: column;
        align-items: center;
        padding: 25px 0;
        gap: 20px;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: 0.4s;
      }
      
      nav ul.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      .profile-header { 
        padding: 18px 12px;
      }
      
      /* MOBILE KECIL - BADGE SEBARIS TIDAK OVERFLOW */
      .profile-badges {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        width: 100%;
      }
      
      .badge-item:nth-child(1),
      .badge-item:nth-child(2) {
        grid-column: span 1;
        padding: 8px 6px;
      }
      
      .badge-item:nth-child(3) {
        grid-column: span 2;
        padding: 8px 10px;
      }
      
      .badge-item i {
        font-size: 18px;
      }
      
      .badge-info h4 {
        font-size: 10px;
      }
      
      .badge-info span {
        font-size: 16px;
      }
      
      .stats-controls {
        grid-template-columns: 1fr;
        padding: 18px;
      }
      
      .category-buttons {
        flex-direction: row;
        gap: 8px;
      }
      
      .category-btn {
        padding: 8px 6px;
        font-size: 13px;
      }
      
      .category-btn i {
        font-size: 14px;
      }
      
      .custom-dropdown .btn {
        padding: 8px 12px;
        font-size: 13px;
      }
      
      .chart-wrapper {
        height: 220px;
      }
    }

    /* ===== SMALL MOBILE (320px - 374px) ===== */
    @media (max-width: 374px) {
      .container { 
        padding: 10px; 
        width: 100%;
      }
      
      nav { padding: 0 3%; }
      nav h2 { font-size: 18px; }
      .hamburger { display: flex; }
      
      nav ul {
        position: fixed;
        top: var(--nav-h);
        left: 0;
        width: 100%;
        background: #0c0c10;
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
        gap: 18px;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: 0.4s;
      }
      
      nav ul.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      .profile-header { 
        padding: 15px 10px; 
      }
      
      .avatar { 
        width: 60px; 
        height: 60px; 
      }
      
      .avatar i { 
        font-size: 30px; 
      }
      
      .profile-info h1 { 
        font-size: 22px; 
      }
      
      .profile-info .username {
        font-size: 13px;
      }
      
      /* MOBILE EKSTREM - BADGE SEBARIS */
      .profile-badges {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        width: 100%;
      }
      
      .badge-item {
        padding: 6px 4px;
        gap: 4px;
      }
      
      .badge-item:nth-child(1),
      .badge-item:nth-child(2) {
        grid-column: span 1;
      }
      
      .badge-item:nth-child(3) {
        grid-column: span 2;
      }
      
      .badge-item i {
        font-size: 16px;
      }
      
      .badge-info h4 { 
        font-size: 9px; 
      }
      
      .badge-info span { 
        font-size: 14px; 
      }
      
      .stats-controls {
        grid-template-columns: 1fr;
        padding: 15px;
      }
      
      .category-buttons {
        flex-direction: row;
        gap: 6px;
      }
      
      .category-btn {
        padding: 8px 4px;
        font-size: 12px;
      }
      
      .category-btn i {
        font-size: 12px;
        margin-right: 2px;
      }
      
      .custom-dropdown .btn {
        padding: 8px 10px;
        font-size: 12px;
      }
      
      .chart-wrapper {
        height: 200px;
      }
      
      .conclusion-card {
        padding: 15px;
        flex-direction: column;
        text-align: center;
      }
      
      .conclusion-card i {
        margin-right: 0;
        margin-bottom: 10px;
      }
      
      .d-flex {
        flex-direction: column;
      }
    }

    /* Landscape mode */
    @media (max-height: 500px) and (orientation: landscape) {
      nav { height: 60px; }
      :root { --nav-h: 60px; }
      .profile-header { padding: 15px 20px; }
      .avatar { width: 50px; height: 50px; }
      .badge-item { padding: 6px 12px; }
      .chart-wrapper { height: 180px; }
    }

    /* Touch optimization */
    @media (hover: none) and (pointer: coarse) {
      .category-btn,
      .custom-dropdown .btn,
      .dropdown-item {
        min-height: 44px;
      }
      nav ul li { padding: 12px 0; }
      .badge-item { min-height: 60px; }
    }
  </style>
</head>
<body>

<!-- NAVBAR -->
<nav>
  <h2>AniGameList</h2>
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <ul id="navMenu">
    <li><a href="index.html">Home</a></li>
    <li><a href="list.html">List</a></li>
    <li><a href="add-review.html">Add Review</a></li>
    <li class="active"><a href="profile.html">Profile</a></li>
  </ul>
</nav>

<!-- MAIN PROFILE -->
<div class="container">

  <!-- PROFILE HEADER -->
  <div class="profile-header">
    <div class="avatar">
      <i class="fas fa-user-circle"></i>
    </div>
    <div class="profile-info">
      <h1>Srvnt07</h1>
      <div class="username">
        <i class="fas fa-calendar-alt"></i> Member since 2023
      </div>
      <div class="profile-badges">
        <div class="badge-item">
          <i class="fas fa-gamepad"></i>
          <div class="badge-info">
            <h4>Games Played</h4>
            <span id="totalGames">115</span>
          </div>
        </div>
        <div class="badge-item">
          <i class="fas fa-film"></i>
          <div class="badge-info">
            <h4>Anime Watched</h4>
            <span id="totalAnime">78</span>
          </div>
        </div>
        <div class="badge-item">
          <i class="fas fa-star"></i>
          <div class="badge-info">
            <h4>Total Reviews</h4>
            <span>85</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- STATS CONTROLS - 3 KOLOM SEJAJAR -->
  <div class="stats-controls">
    <!-- TYPE: button Game/Anime -->
    <div class="control-group">
      <label><i class="fas fa-tag"></i> TYPE</label>
      <div class="category-buttons">
        <button id="btnGame" class="category-btn active"><i class="fas fa-gamepad"></i> Game</button>
        <button id="btnAnime" class="category-btn"><i class="fas fa-film"></i> Anime</button>
      </div>
    </div>

    <!-- CHART TYPE -->
    <div class="control-group">
      <label><i class="fas fa-chart-bar"></i> CHART</label>
      <div class="custom-dropdown dropdown">
        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="chartTypeDropdownBtn">
          <span><i class="fas fa-chart-bar me-2" style="color: #b57cff;"></i> Bar Chart</span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="chartTypeDropdownBtn">
          <li><a class="dropdown-item active" data-value="bar" href="#"><i class="fas fa-chart-bar"></i> Bar Chart</a></li>
          <li><a class="dropdown-item" data-value="line" href="#"><i class="fas fa-chart-line"></i> Line Chart</a></li>
          <li><a class="dropdown-item" data-value="pie" href="#"><i class="fas fa-chart-pie"></i> Pie Chart</a></li>
        </ul>
      </div>
    </div>

    <!-- KRITERIA -->
    <div class="control-group">
      <label><i class="fas fa-filter"></i> KRITERIA</label>
      <div class="custom-dropdown dropdown">
        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="criteriaDropdownBtn">
          <span><i class="fas fa-filter me-2" style="color: #b57cff;"></i> Platform</span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="criteriaDropdownBtn" id="criteriaDropdownMenu">
          <!-- diisi javascript -->
        </ul>
      </div>
    </div>
  </div>

  <!-- CHART AREA -->
  <div class="chart-container">
    <div class="chart-wrapper">
      <canvas id="statsChart"></canvas>
    </div>
  </div>

  <!-- KESIMPULAN -->
  <div class="conclusion-card">
    <div class="d-flex align-items-center">
      <i class="fas fa-quote-left"></i>
      <div class="conclusion-text" id="conclusionText">
        Loading statistic...
      </div>
    </div>
  </div>

</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ---------- HAMBURGER MENU ----------
  const hamburger = document.getElementById('hamburger');
  const navMenu = document.getElementById('navMenu');
  
  hamburger.addEventListener('click', (e) => {
    e.stopPropagation();
    hamburger.classList.toggle('active');
    navMenu.classList.toggle('active');
  });

  document.addEventListener('click', (e) => {
    if (!navMenu.contains(e.target) && !hamburger.contains(e.target)) {
      hamburger.classList.remove('active');
      navMenu.classList.remove('active');
    }
  });

  // ---------- DATA GAME & ANIME ----------
  const gameStats = {
    platform: { labels: ['PC', 'PlayStation', 'Xbox', 'Nintendo', 'Mobile'], values: [42, 35, 18, 28, 22] },
    genre: { labels: ['Action', 'RPG', 'FPS', 'Adventure', 'Simulation'], values: [48, 39, 22, 19, 12] },
    year: { labels: ['2024', '2023', '2022', '2021', '2020'], values: [15, 32, 28, 23, 17] },
    developer: { labels: ['FromSoftware', 'Naughty Dog', 'CD Projekt', 'Rockstar', 'Nintendo'], values: [24, 21, 17, 14, 19] }
  };

  const animeStats = {
    type: { labels: ['TV Series', 'Movie', 'OVA', 'ONA'], values: [52, 24, 10, 6] },
    genre: { labels: ['Action', 'Fantasy', 'Romance', 'Slice of Life', 'Comedy'], values: [42, 35, 22, 18, 26] },
    year: { labels: ['2024', '2023', '2022', '2021', '2020'], values: [18, 32, 28, 24, 20] },
    studio: { labels: ['Ufotable', 'Kyoto Animation', 'Madhouse', 'Bones', 'MAPPA'], values: [18, 15, 12, 16, 22] }
  };

  // ---------- PALET WARNA ----------
  const colorPalette = [
    '#FF6B6B', '#4ECDC4', '#FFE66D', '#FF9F1C', '#C77DFF', '#AACC00',
    '#00B4D8', '#FF8C42', '#9381FF', '#06D6A0', '#E5989B', '#6D597A',
    '#B56576', '#F08A5D', '#6A4C93', '#1982C4', '#8AC926', '#FFCA3A'
  ];

  function getColors(count) {
    let colors = [];
    for (let i = 0; i < count; i++) colors.push(colorPalette[i % colorPalette.length]);
    return colors;
  }

  // ---------- STATE ----------
  let currentCategory = 'game';
  let myChart;

  // ---------- POPULATE DROPDOWN KRITERIA ----------
  function populateCriteriaDropdown(category) {
    const menu = document.getElementById('criteriaDropdownMenu');
    menu.innerHTML = '';
    let items = [];
    
    if (category === 'game') {
      items = [
        { value: 'platform', text: 'üñ•Ô∏è Platform', icon: 'fa-solid fa-computer' },
        { value: 'genre', text: 'üé≠ Genre', icon: 'fa-solid fa-masks-theater' },
        { value: 'year', text: 'üìÖ Year', icon: 'fa-regular fa-calendar' },
        { value: 'developer', text: 'üè¢ Developer', icon: 'fa-solid fa-building' }
      ];
    } else {
      items = [
        { value: 'type', text: 'üì∫ Type', icon: 'fa-solid fa-tv' },
        { value: 'genre', text: 'üé≠ Genre', icon: 'fa-solid fa-masks-theater' },
        { value: 'year', text: 'üìÖ Year', icon: 'fa-regular fa-calendar' },
        { value: 'studio', text: 'üè¢ Studio', icon: 'fa-solid fa-film' }
      ];
    }

    items.forEach((item, index) => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.className = `dropdown-item ${index === 0 ? 'active' : ''}`;
      a.href = '#';
      a.setAttribute('data-value', item.value);
      a.innerHTML = `<i class="${item.icon} me-2"></i> ${item.text}`;
      li.appendChild(a);
      menu.appendChild(li);
    });

    const btn = document.getElementById('criteriaDropdownBtn');
    btn.innerHTML = `<span><i class="${items[0].icon} me-2" style="color: #b57cff;"></i> ${items[0].text}</span>`;
  }

  // ---------- GET CURRENT DATA ----------
  function getCurrentData() {
    const activeItem = document.querySelector('#criteriaDropdownMenu .dropdown-item.active');
    let criteria = 'platform';
    if (activeItem) {
      criteria = activeItem.getAttribute('data-value');
    }
    if (currentCategory === 'game') {
      return gameStats[criteria] || gameStats.platform;
    } else {
      return animeStats[criteria] || animeStats.type;
    }
  }

  // ---------- UPDATE CHART ----------
  function updateChart() {
    const activeChartItem = document.querySelector('.custom-dropdown .dropdown-item.active[data-value]');
    let chartType = 'bar';
    if (activeChartItem) {
      chartType = activeChartItem.getAttribute('data-value');
    }

    const data = getCurrentData();
    if (!data) return;

    if (myChart) myChart.destroy();

    let dataset = {
      label: currentCategory === 'game' ? 'Jumlah Game Dimainkan' : 'Jumlah Anime Ditonton',
      data: data.values,
      borderWidth: 2,
      borderRadius: 6,
      tension: 0.3
    };

    if (chartType === 'bar') {
      dataset.backgroundColor = getColors(data.labels.length);
      dataset.borderColor = dataset.backgroundColor.map(c => c);
      dataset.borderWidth = 1;
    } else if (chartType === 'pie') {
      dataset.backgroundColor = getColors(data.labels.length);
      dataset.borderColor = 'white';
      dataset.borderWidth = 2;
    } else {
      dataset.backgroundColor = 'rgba(78, 205, 196, 0.1)';
      dataset.borderColor = '#4ECDC4';
      dataset.borderWidth = 3;
      dataset.pointBackgroundColor = '#4ECDC4';
      dataset.pointBorderColor = 'white';
    }

    const config = {
      type: chartType,
      data: { labels: data.labels, datasets: [dataset] },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: chartType === 'pie', position: 'bottom', labels: { color: 'white' } },
          tooltip: { backgroundColor: '#1e1e24', titleColor: 'white', bodyColor: '#b0b0b8' }
        },
        scales: (chartType === 'pie') ? {} : {
          y: { beginAtZero: true, grid: { color: '#2c2c34' }, ticks: { color: '#b0b0b8' } },
          x: { grid: { display: false }, ticks: { color: '#b0b0b8' } }
        }
      }
    };

    myChart = new Chart(document.getElementById('statsChart'), config);
    
    const activeCriteria = document.querySelector('#criteriaDropdownMenu .dropdown-item.active');
    let criteria = 'platform';
    if (activeCriteria) criteria = activeCriteria.getAttribute('data-value');
    updateConclusion(criteria, data);
  }

  // ---------- UPDATE KESIMPULAN ----------
  function updateConclusion(criteria, data) {
    const total = data.values.reduce((a, b) => a + b, 0);
    const maxIndex = data.values.indexOf(Math.max(...data.values));
    const topItem = data.labels[maxIndex];
    const topValue = data.values[maxIndex];
    const percentage = ((topValue / total) * 100).toFixed(1);
    let conclusion = '';

    if (currentCategory === 'game') {
      switch(criteria) {
        case 'platform': conclusion = `üéÆ <span>Srvnt07</span> paling sering bermain di platform <span>${topItem}</span> (${topValue} judul, ${percentage}% dari total game).`; break;
        case 'genre':    conclusion = `üé≠ Genre <span>${topItem}</span> mendominasi koleksi game (${topValue} judul, ${percentage}%).`; break;
        case 'year':     conclusion = `üìÜ Tahun <span>${topItem}</span> adalah tahun paling produktif, dengan ${topValue} game diselesaikan.`; break;
        case 'developer':conclusion = `üè¢ Developer favorit: <span>${topItem}</span>! ${topValue} game dari mereka telah dimainkan.`; break;
        default: conclusion = `üìä Preferensi game mengarah ke <span>${topItem}</span>.`;
      }
    } else {
      switch(criteria) {
        case 'type':   conclusion = `üì∫ Tipe <span>${topItem}</span> paling banyak ditonton (${topValue} judul, ${percentage}% dari total anime).`; break;
        case 'genre':  conclusion = `üé≠ Genre anime favorit: <span>${topItem}</span> dengan ${topValue} judul (${percentage}%).`; break;
        case 'year':   conclusion = `üìÜ Tahun <span>${topItem}</span> adalah tahun terbanyak menonton anime (${topValue} judul).`; break;
        case 'studio': conclusion = `üè¢ Studio <span>${topItem}</span> paling sering dinikmati, sebanyak ${topValue} anime.`; break;
        default: conclusion = `üìä Preferensi anime mengarah ke <span>${topItem}</span>.`;
      }
    }
    document.getElementById('conclusionText').innerHTML = conclusion;
  }

  // ---------- SWITCH KATEGORI ----------
  function setCategory(category) {
    currentCategory = category;
    const btnGame = document.getElementById('btnGame');
    const btnAnime = document.getElementById('btnAnime');
    if (category === 'game') {
      btnGame.classList.add('active');
      btnAnime.classList.remove('active');
    } else {
      btnAnime.classList.add('active');
      btnGame.classList.remove('active');
    }
    populateCriteriaDropdown(category);
    updateChart();
  }

  // ---------- EVENT LISTENERS ----------
  document.querySelectorAll('#chartTypeDropdownBtn + .dropdown-menu .dropdown-item').forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      document.querySelectorAll('#chartTypeDropdownBtn + .dropdown-menu .dropdown-item').forEach(el => el.classList.remove('active'));
      this.classList.add('active');
      const btn = document.getElementById('chartTypeDropdownBtn');
      btn.innerHTML = `<span><i class="${this.querySelector('i').className} me-2" style="color: #b57cff;"></i> ${this.textContent.trim()}</span>`;
      updateChart();
    });
  });

  document.getElementById('criteriaDropdownMenu').addEventListener('click', function(e) {
    const item = e.target.closest('.dropdown-item');
    if (!item) return;
    e.preventDefault();
    document.querySelectorAll('#criteriaDropdownMenu .dropdown-item').forEach(el => el.classList.remove('active'));
    item.classList.add('active');
    const btn = document.getElementById('criteriaDropdownBtn');
    btn.innerHTML = `<span><i class="${item.querySelector('i').className} me-2" style="color: #b57cff;"></i> ${item.textContent.trim()}</span>`;
    updateChart();
  });

  document.getElementById('btnGame').addEventListener('click', () => setCategory('game'));
  document.getElementById('btnAnime').addEventListener('click', () => setCategory('anime'));

  // ---------- INIT ----------
  window.onload = function() {
    setCategory('game');
    
    const barItem = document.querySelector('#chartTypeDropdownBtn + .dropdown-menu .dropdown-item[data-value="bar"]');
    if (barItem) {
      barItem.classList.add('active');
      document.getElementById('chartTypeDropdownBtn').innerHTML = `<span><i class="fas fa-chart-bar me-2" style="color: #b57cff;"></i> Bar Chart</span>`;
    }
    
    const totalGame = gameStats.platform.values.reduce((a,b) => a + b, 0);
    const totalAnime = animeStats.type.values.reduce((a,b) => a + b, 0);
    document.getElementById('totalGames').innerText = totalGame;
    document.getElementById('totalAnime').innerText = totalAnime;
  };
</script>

</body>
</html>